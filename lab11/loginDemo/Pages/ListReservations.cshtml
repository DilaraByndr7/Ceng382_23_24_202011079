@page
@model loginDemo.Pages.ListReservationsModel
@{
    ViewData["Title"] = "List Reservations";
}

<div class="search-container">
    <h1>Search for Available Rooms</h1>

    <form method="get" asp-page="ListReservations">
        <div class="form-group">
            <label for="SearchStartTime">Start Time</label>
            <input type="datetime-local" id="SearchStartTime" name="SearchStartTime" class="form-control" required />
        </div>
        <div class="form-group">
            <label for="SearchEndTime">End Time</label>
            <input type="datetime-local" id="SearchEndTime" name="SearchEndTime" class="form-control" required />
        </div>
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    @if (Model.AvailableRooms != null)
    {
        <div class="available-rooms">
            <h2>Available Rooms</h2>
            <ul>
                @foreach (var room in Model.AvailableRooms)
                {
                    <li>@room.Name</li>
                }
            </ul>
        </div>
    }
</div>

<div class="room-container">
    <h1>List of Rooms</h1>

    @foreach (var room in Model.Rooms)
    {
        <div class="room">
            <h2>@room.Name</h2>
            <p>@room.Description</p>
            <p>Capacity: @room.Capacity</p>
            <img src="@room.PhotoPath" alt="Room Photo" style="width:200px;height:150px;"/>
            
            <h3>Weekly Schedule</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Start Time</th>
                        <th>End Time</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                @foreach (var reservation in room.Reservations)
                {
                    <tr>
                        <td>@reservation.StartTime</td>
                        <td>@reservation.EndTime</td>
                        <td>@(reservation.IsCancelled ? "Cancelled" : "Booked")</td>
                    </tr>
                }
                </tbody>
            </table>

            <form method="post" asp-page-handler="Reserve" asp-route-roomId="@room.Id">
                <input type="datetime-local" name="startTime" required />
                <input type="datetime-local" name="endTime" required />
                <button type="submit" class="btn btn-primary">Reserve</button>
            </form>
            
          
            <ul>
                @foreach (var reservation in room.Reservations)
                {
                    <li>
                        @reservation.StartTime - @reservation.EndTime
                        <form method="post" asp-page-handler="Cancel" asp-route-id="@reservation.Id">
                            <button type="submit" class="btn btn-danger">Cancel</button>
                        </form>
                    </li>
                }
            </ul>
        </div>
    }
</div>




<style>
  
     body {
        background-image: url('photos/Ind.jpg');
        background-size: cover;
        background-repeat:no-repeat;
    
       
    }

     .room-container {
        max-width: 800px;
        margin: 20px auto;
    }

    .room {
        background-color: #fff;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .room h2 {
        color: #007bff;
    }

    .room p {
        margin-bottom: 10px;
    }

    .table {
        width: 100%;
        margin-bottom: 20px;
    }

    .table th,
    .table td {
        padding: 8px;
        border-bottom: 1px solid #ddd;
    }

    .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-primary {
        background-color: #007bff;
        color: #fff;
    }

    .btn-danger {
        background-color: #dc3545;
        color: #fff;
    }



    .search-container {
        max-width: 600px;
        margin: 20px auto;
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }

    input[type="datetime-local"] {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }

    .btn-primary {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 10px 20px;
        font-size: 16px;
        border-radius: 4px;
        cursor: pointer;
    }

    .btn-primary:hover {
        background-color: #0056b3;
    }

    .available-rooms {
        margin-top: 20px;
    }

    ul {
        list-style-type: none;
        padding: 0;
    }

    li {
        margin-bottom: 10px;
    }
</style>

